# 性能数据：

基于环境一测得：

| 功能       | 性能   | 说明    |
| ---        | ---    | ---     |
| VAD-ONNX   | 130 倍 | ---     |
| ASR-server | 46 倍  | 并发120 |

CPU 核数跟并发成正比，并发超过CPU性能则会出现响应超时。要提高并发就增加CPU核数。
48和 CPU 可以支持并发到120（python协程数量），140则会出现timeout。


# 测试数据

SPEECHIO 开源20类中文语音数据，每类选取150条，合计3000条。

# 测试环境

## 环境一（PVE服务器）

| 配件 | 规格 | 数量 |
| --- | --- | --- |
| GPU | 0 | 0 |
| CPU | Intel(R) Xeon(R) Silver 4214R CPU @ 2.40GHz | 48 核 |
| 内存 | - | 128 GB |

实际测试使用8核。

## 环境二（阿里云服务器)

| 配件 | 规格 | 数量 |
| --- | --- | --- |
| GPU | 0 | 0 |
| CPU | Intel(R) Xeon(R) Platinum 8269CY CPU @ 2.50GHz | 8 核 |
| 内存| - | 32 GB |


# 测试结果

* CER: 值越低越好，准确率越高
* RTF：值月底越好，转写速度越快。

**注[1]：** 测试过程中同时再跑 TTS（40进程）、视频提取（8进程），可能影响 RTF 值。从结果看，onnx 的 RTF 比 torch 还高是不正常的。

更多结果将加到下表。

|测试环境| 测试时间 | 模型 | CER | RTF | 推理方式 | 备注 |
| --- | --- | --- | --- | --- | --- | --- |
| -         | 2022-06-09 | 阿里云                  | 6.77 % |     -  | 阿里云一句话        | - |
| 环境一[1] | 2022-06-09 | 20220506_u2pp_conformer | 9.10 % | 0.1240 | libtorch + 浮点模型 | - |
| 环境一[1] | 2022-06-09 | 20220506_u2pp_conformer | 9.28 % | 0.0997 | libtorch + 量化模型 | - |
| 环境一[1] | 2022-06-09 | 20220506_u2pp_conformer | 9.10 % | 0.2600 | onnx_cpu            | - |
| 环境一[1] | 2022-06-09 | 20220609_u2pp_conformer | 9.39 % | 0.1512 | libtorch + 浮点模型 | checkpoint 前十均值 |
| 环境一[1] | 2022-06-09 | 20220609_u2pp_conformer | 9.39 % | 0.2600 | onnx_cpu            | checkpoint 前十均值 |
| 环境二    | 2022-06-13 | 20220506_u2pp_conformer | 9.10 % | 0.05488| libtorch + 浮点模型 | - |
| 环境二    | 2022-06-13 | 20220506_u2pp_conformer | 9.28 % | 0.0447 | libtorch + 量化模型 | - |
| 环境二    | 2022-06-13 | 20220506_u2pp_conformer | 9.10 % | 0.05341| onnx_cpu            | - |
| 环境二    | 2022-06-13 | 20220609_u2pp_conformer | 9.39 % | 0.05449| libtorch + 浮点模型 | checkpoint 前十均值 |
| 环境二    | 2022-06-13 | 20220609_u2pp_conformer | 9.39 % | 0.05322| onnx_cpu            | checkpoint 前十均值 |


